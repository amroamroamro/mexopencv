<!DOCTYPE html>
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
      <!--This HTML was auto-generated from published MATLAB code.-->
      <title>Plot demo</title>
      <meta name="generator" content="MATLAB 9.2">
      <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/">
      <meta name="DC.date" content="2017-11-27">
      <meta name="DC.source" content="plotting_demo.m">
      <link rel="stylesheet" type="text/css" href="publish_custom.css">
   </head>
   <body>
      <div class="content">
         <h1 id="1">Plot demo</h1>
         <!--introduction-->
         <p>Demonstrates OpenCV and MATLAB plotting.</p>
         <!--/introduction-->
         <h2 id="toc">Contents</h2>
         <div>
            <ul>
               <li><a href="#2">Data</a></li>
               <li><a href="#3">Options</a></li>
               <li><a href="#4">OpenCV</a></li>
               <li><a href="#7">MATLAB/Octave (HG1)</a></li>
               <li><a href="#9">MATLAB (HG2)</a></li>
            </ul>
         </div>
         <h2 id="2">Data</h2><pre class="codeinput"><span class="keyword">try</span>, rng(5); <span class="keyword">end</span>  <span class="comment">% fixed PRNG seed for reproducible results</span>
y = cumsum(rand(100,1) - 0.5);
x = (1:numel(y)).';
assert(isvector(x) &amp;&amp; isvector(y) &amp;&amp; numel(x) == numel(y));</pre><h2 id="3">Options</h2><pre class="codeinput">sz = [640 480];  <span class="comment">% [400 300] is the minimum</span>
xl = [min(x) max(x)] + [-0.1 0.1]*(max(x) - min(x));
yl = [min(y) max(y)] + [-0.1 0.1]*(max(y) - min(y));
lw = 2;
ln = true;
lc = [0 114 189];
bg = [255 255 255];
fg = [0 0 0];
gc = [222 222 222];</pre><h2 id="4">OpenCV</h2><pre class="codeinput">p = cv.Plot2d(x, y);
p.PlotSize = sz;
p.MinX = xl(1);
p.MaxX = xl(2);
p.MinY = yl(1);
p.MaxY = yl(2);
p.PlotLineWidth = lw;
p.NeedPlotLine = ln;
p.PlotLineColor = lc;
p.PlotBackgroundColor = bg;
p.PlotAxisColor = fg;
p.PlotTextColor = fg;
p.PlotGridColor = gc;
img = p.render();</pre><pre class="codeinput">img = cv.cvtColor(img, <span class="string">'BGR2RGB'</span>);
<span class="keyword">if</span> ~mexopencv.isOctave()
    imshow(img, <span class="string">'Border'</span>,<span class="string">'tight'</span>, <span class="string">'InitialMagnification'</span>,100)
<span class="keyword">else</span>
    imshow(img)
<span class="keyword">end</span>
set(gcf, <span class="string">'Name'</span>,<span class="string">'OpenCV'</span>)</pre><img src="plotting_demo_01.png"><pre class="codeinput">fname = fullfile(tempdir(), <span class="string">'plot_opencv.png'</span>);
cv.imwrite(fname, img);
disp([<span class="string">'Saved to: '</span> fname])</pre><pre class="codeoutput">Saved to: C:\Users\Amro\AppData\Local\Temp\plot_opencv.png
</pre><h2 id="7">MATLAB/Octave (HG1)</h2><pre class="codeinput">hFig = figure(<span class="string">'Name'</span>,<span class="string">'MATLAB'</span>, <span class="string">'Position'</span>,[200 200 sz]);
hAx = axes();
hLine = line(x, y, <span class="string">'LineWidth'</span>,lw, <span class="string">'LineStyle'</span>,<span class="string">'-'</span>, <span class="string">'Color'</span>,lc/255);
<span class="keyword">if</span> ~ln
    set(hLine, <span class="string">'LineStyle'</span>,<span class="string">'none'</span>, <span class="string">'Marker'</span>,<span class="string">'.'</span>, <span class="string">'MarkerSize'</span>,12);
<span class="keyword">end</span>
<span class="keyword">if</span> ~mexopencv.isOctave()
    <span class="comment">%HACK: some Octave graphics backends ignore axislocation=origin</span>
    <span class="comment">% also setting gridalpha turns grid lines black</span>
    ax_props = {<span class="string">'Position'</span>,[0 0 1 1], <span class="string">'GridAlpha'</span>,1.0};
<span class="keyword">else</span>
    ax_props = {};
<span class="keyword">end</span>
set(hAx, <span class="string">'XLim'</span>,xl, <span class="string">'YLim'</span>,yl, <span class="string">'LineWidth'</span>,2, <span class="keyword">...</span>
    <span class="string">'Color'</span>,bg/255, <span class="string">'XColor'</span>,fg/255, <span class="string">'YColor'</span>,fg/255, <span class="keyword">...</span>
    <span class="string">'GridColor'</span>,gc/255, <span class="string">'GridLineStyle'</span>,<span class="string">'--'</span>, <span class="string">'XGrid'</span>,<span class="string">'on'</span>, <span class="string">'YGrid'</span>,<span class="string">'on'</span>, <span class="keyword">...</span>
    <span class="string">'Box'</span>,<span class="string">'off'</span>, <span class="string">'TickLength'</span>,[0 0], <span class="string">'YDir'</span>,<span class="string">'reverse'</span>, <span class="keyword">...</span>
    <span class="string">'XAxisLocation'</span>,<span class="string">'origin'</span>, <span class="string">'YAxisLocation'</span>,<span class="string">'origin'</span>, ax_props{:});
<span class="keyword">if</span> false
    set(hAx, <span class="string">'XTickLabel'</span>, <span class="string">''</span>, <span class="string">'YTickLabel'</span>, <span class="string">''</span>, <span class="string">'FontSmoothing'</span>, <span class="string">'off'</span>);
    set(hFig, <span class="string">'GraphicsSmoothing'</span>, <span class="string">'off'</span>);
<span class="keyword">end</span>
text(0.1, 0.98, sprintf(<span class="string">'X = %g\nY = %g\n'</span>, x(end), y(end)), <span class="keyword">...</span>
    <span class="string">'Units'</span>,<span class="string">'normalized'</span>, <span class="string">'Interpreter'</span>,<span class="string">'none'</span>, <span class="string">'Color'</span>,fg/255, <span class="keyword">...</span>
    <span class="string">'FontName'</span>,<span class="string">'FixedWidth'</span>, <span class="string">'FontSize'</span>,14, <span class="string">'FontWeight'</span>,<span class="string">'bold'</span>, <span class="keyword">...</span>
    <span class="string">'VerticalAlignment'</span>,<span class="string">'top'</span>, <span class="string">'HorizontalAlignment'</span>,<span class="string">'left'</span>);</pre><img src="plotting_demo_02.png"><pre class="codeinput">fname = fullfile(tempdir(), <span class="string">'plot_matlab1.png'</span>);
print(hFig, fname, <span class="string">'-dpng'</span>, <span class="string">'-r0'</span>);
disp([<span class="string">'Saved to: '</span> fname]);</pre><pre class="codeoutput">Saved to: C:\Users\Amro\AppData\Local\Temp\plot_matlab1.png
</pre><img src="plotting_demo_03.png"><h2 id="9">MATLAB (HG2)</h2><pre class="codeinput"><span class="keyword">if</span> ~mexopencv.isOctave()
    hFig = figure(<span class="string">'Name'</span>,<span class="string">'MATLAB'</span>);
    hFig.Position(3:4) = sz;
    movegui(hFig, <span class="string">'center'</span>);

    hAx = axes();
    hAx.Position = [0 0 1 1];

    hLine = line(x, y);
    hLine.LineWidth = lw;
    hLine.LineStyle = <span class="string">'-'</span>;
    <span class="keyword">if</span> ~ln
        hLine.LineStyle = <span class="string">'none'</span>;
        hLine.Marker = <span class="string">'.'</span>;
        hLine.MarkerSize = 12;
    <span class="keyword">end</span>
    hLine.Color = lc/255;

    hAx.XLim = xl;
    hAx.YLim = yl;
    hAx.Color = bg/255;
    hAx.XColor = fg/255;
    hAx.YColor = fg/255;
    hAx.GridColor = gc/255;
    hAx.GridAlpha = 1.0;
    hAx.LineWidth = lw;
    hAx.GridLineStyle = <span class="string">'--'</span>;
    hAx.XGrid = <span class="string">'on'</span>;
    hAx.YGrid = <span class="string">'on'</span>;
    hAx.Box = <span class="string">'off'</span>;
    hAx.TickLength = [0 0];
    hAx.XAxisLocation = <span class="string">'origin'</span>;
    hAx.YAxisLocation = <span class="string">'origin'</span>;
    hAx.YDir = <span class="string">'reverse'</span>;
    <span class="keyword">if</span> false
        hAx.XTickLabel = <span class="string">''</span>;
        hAx.YTickLabel = <span class="string">''</span>;
        hAx.FontSmoothing = <span class="string">'off'</span>;
        hFig.GraphicsSmoothing = <span class="string">'off'</span>;
    <span class="keyword">end</span>

    hTxt = text(0.1, 0.98, <span class="string">''</span>, <span class="string">'Units'</span>,<span class="string">'normalized'</span>);
    hTxt.String = sprintf(<span class="string">'X = %g\nY = %g\n'</span>, x(end), y(end));
    hTxt.Interpreter = <span class="string">'none'</span>;
    hTxt.Color = fg/255;
    hTxt.FontName = <span class="string">'FixedWidth'</span>;
    hTxt.FontSize = 14;
    hTxt.FontWeight = <span class="string">'bold'</span>;
    hTxt.VerticalAlignment = <span class="string">'top'</span>;
    hTxt.HorizontalAlignment = <span class="string">'left'</span>;

    <span class="comment">% capture</span>
    [im,map] = frame2im(getframe(hAx));
    <span class="keyword">if</span> isempty(map)
        args = {im};
    <span class="keyword">else</span>
        args = {im, map};
    <span class="keyword">end</span>
    fname = fullfile(tempdir(), <span class="string">'plot_matlab2.png'</span>);
    imwrite(args{:}, fname);
    disp([<span class="string">'Saved to: '</span> fname]);
<span class="keyword">end</span></pre><pre class="codeoutput">Saved to: C:\Users\Amro\AppData\Local\Temp\plot_matlab2.png
</pre><img src="plotting_demo_04.png"><div class="footer">
            <p><a href="https://www.mathworks.com/products/matlab.html">Published with MATLAB&reg; R2017a</a></p>
         </div>
      </div>
      <!--
##### SOURCE BEGIN #####
%% Plot demo
%
% Demonstrates OpenCV and MATLAB plotting.
%

%% Data
try, rng(5); end  % fixed PRNG seed for reproducible results
y = cumsum(rand(100,1) - 0.5);
x = (1:numel(y)).';
assert(isvector(x) && isvector(y) && numel(x) == numel(y));

%% Options
sz = [640 480];  % [400 300] is the minimum
xl = [min(x) max(x)] + [-0.1 0.1]*(max(x) - min(x));
yl = [min(y) max(y)] + [-0.1 0.1]*(max(y) - min(y));
lw = 2;
ln = true;
lc = [0 114 189];
bg = [255 255 255];
fg = [0 0 0];
gc = [222 222 222];

%% OpenCV
p = cv.Plot2d(x, y);
p.PlotSize = sz;
p.MinX = xl(1);
p.MaxX = xl(2);
p.MinY = yl(1);
p.MaxY = yl(2);
p.PlotLineWidth = lw;
p.NeedPlotLine = ln;
p.PlotLineColor = lc;
p.PlotBackgroundColor = bg;
p.PlotAxisColor = fg;
p.PlotTextColor = fg;
p.PlotGridColor = gc;
img = p.render();

%%
img = cv.cvtColor(img, 'BGR2RGB');
if ~mexopencv.isOctave()
    imshow(img, 'Border','tight', 'InitialMagnification',100)
else
    imshow(img)
end
set(gcf, 'Name','OpenCV')

%%
fname = fullfile(tempdir(), 'plot_opencv.png');
cv.imwrite(fname, img);
disp(['Saved to: ' fname])

%% MATLAB/Octave (HG1)
hFig = figure('Name','MATLAB', 'Position',[200 200 sz]);
hAx = axes();
hLine = line(x, y, 'LineWidth',lw, 'LineStyle','-', 'Color',lc/255);
if ~ln
    set(hLine, 'LineStyle','none', 'Marker','.', 'MarkerSize',12);
end
if ~mexopencv.isOctave()
    %HACK: some Octave graphics backends ignore axislocation=origin
    % also setting gridalpha turns grid lines black
    ax_props = {'Position',[0 0 1 1], 'GridAlpha',1.0};
else
    ax_props = {};
end
set(hAx, 'XLim',xl, 'YLim',yl, 'LineWidth',2, ...
    'Color',bg/255, 'XColor',fg/255, 'YColor',fg/255, ...
    'GridColor',gc/255, 'GridLineStyle','REPLACE_WITH_DASH_DASH', 'XGrid','on', 'YGrid','on', ...
    'Box','off', 'TickLength',[0 0], 'YDir','reverse', ...
    'XAxisLocation','origin', 'YAxisLocation','origin', ax_props{:});
if false
    set(hAx, 'XTickLabel', '', 'YTickLabel', '', 'FontSmoothing', 'off');
    set(hFig, 'GraphicsSmoothing', 'off');
end
text(0.1, 0.98, sprintf('X = %g\nY = %g\n', x(end), y(end)), ...
    'Units','normalized', 'Interpreter','none', 'Color',fg/255, ...
    'FontName','FixedWidth', 'FontSize',14, 'FontWeight','bold', ...
    'VerticalAlignment','top', 'HorizontalAlignment','left');

%%
fname = fullfile(tempdir(), 'plot_matlab1.png');
print(hFig, fname, '-dpng', '-r0');
disp(['Saved to: ' fname]);

%% MATLAB (HG2)
if ~mexopencv.isOctave()
    hFig = figure('Name','MATLAB');
    hFig.Position(3:4) = sz;
    movegui(hFig, 'center');

    hAx = axes();
    hAx.Position = [0 0 1 1];

    hLine = line(x, y);
    hLine.LineWidth = lw;
    hLine.LineStyle = '-';
    if ~ln
        hLine.LineStyle = 'none';
        hLine.Marker = '.';
        hLine.MarkerSize = 12;
    end
    hLine.Color = lc/255;

    hAx.XLim = xl;
    hAx.YLim = yl;
    hAx.Color = bg/255;
    hAx.XColor = fg/255;
    hAx.YColor = fg/255;
    hAx.GridColor = gc/255;
    hAx.GridAlpha = 1.0;
    hAx.LineWidth = lw;
    hAx.GridLineStyle = 'REPLACE_WITH_DASH_DASH';
    hAx.XGrid = 'on';
    hAx.YGrid = 'on';
    hAx.Box = 'off';
    hAx.TickLength = [0 0];
    hAx.XAxisLocation = 'origin';
    hAx.YAxisLocation = 'origin';
    hAx.YDir = 'reverse';
    if false
        hAx.XTickLabel = '';
        hAx.YTickLabel = '';
        hAx.FontSmoothing = 'off';
        hFig.GraphicsSmoothing = 'off';
    end

    hTxt = text(0.1, 0.98, '', 'Units','normalized');
    hTxt.String = sprintf('X = %g\nY = %g\n', x(end), y(end));
    hTxt.Interpreter = 'none';
    hTxt.Color = fg/255;
    hTxt.FontName = 'FixedWidth';
    hTxt.FontSize = 14;
    hTxt.FontWeight = 'bold';
    hTxt.VerticalAlignment = 'top';
    hTxt.HorizontalAlignment = 'left';

    % capture
    [im,map] = frame2im(getframe(hAx));
    if isempty(map)
        args = {im};
    else
        args = {im, map};
    end
    fname = fullfile(tempdir(), 'plot_matlab2.png');
    imwrite(args{:}, fname);
    disp(['Saved to: ' fname]);
end

##### SOURCE END #####
-->
   </body>
</html>