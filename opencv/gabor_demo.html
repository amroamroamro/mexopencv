<!DOCTYPE html>
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
      <!--This HTML was auto-generated from published MATLAB code.-->
      <title>Gabor filtering</title>
      <meta name="generator" content="MATLAB 9.2">
      <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/">
      <meta name="DC.date" content="2017-11-27">
      <meta name="DC.source" content="gabor_demo.m">
      <link rel="stylesheet" type="text/css" href="publish_custom.css">
   </head>
   <body>
      <div class="content">
         <h1 id="1">Gabor filtering</h1>
         <!--introduction-->
         <p>This sample demonstrates the use of multiple Gabor filter convolutions to get <a href="http://www.redfieldplugins.com/filterFractalius.htm">Fractalius-like</a> image effect.
         </p>
         <p>Sources:</p>
         <div>
            <ul>
               <li><a href="https://github.com/opencv/opencv/blob/3.2.0/samples/python/gabor_threads.py">https://github.com/opencv/opencv/blob/3.2.0/samples/python/gabor_threads.py</a></li>
            </ul>
         </div>
         <!--/introduction-->
         <p>load image</p><pre class="codeinput">img = imread(fullfile(mexopencv.root(),<span class="string">'test'</span>,<span class="string">'img001.jpg'</span>));</pre><p>build an array of Gabor filters with different orientations</p><pre class="codeinput">ksize = 31;
thetas = 0:pi/16:pi-pi/16;
filters = cell(size(thetas));
<span class="keyword">for</span> i=1:numel(thetas)
    kern = cv.getGaborKernel(<span class="string">'KSize'</span>,[ksize ksize], <span class="string">'Theta'</span>,thetas(i), <span class="keyword">...</span>
        <span class="string">'Sigma'</span>,4, <span class="string">'Lambda'</span>,10, <span class="string">'Gamma'</span>,0.5, <span class="string">'Psi'</span>,0, <span class="string">'KType'</span>,<span class="string">'single'</span>);
    kern = kern / (1.5 * sum(kern(:)));
    filters{i} = kern;
<span class="keyword">end</span></pre><p>visualize Gabor filters</p><pre class="codeinput"><span class="keyword">if</span> mexopencv.require(<span class="string">'images'</span>)
    montage(cat(4,filters{:}), <span class="string">'DisplayRange'</span>,[])
<span class="keyword">end</span></pre><img src="gabor_demo_01.png"><p>process images using Gabor filters and accumulate results (Note: you can use PARFOR instead of FOR to run this in parallel)</p><pre class="codeinput">tic
res = zeros(size(img), class(img));
<span class="keyword">for</span> i=1:numel(filters)
    fimg = cv.filter2D(img, filters{i});
    res = max(res, fimg);
<span class="keyword">end</span>
toc</pre><pre class="codeoutput">Elapsed time is 0.550728 seconds.
</pre><p>show result</p><pre class="codeinput">figure, imshow(img), title(<span class="string">'image'</span>)
figure, imshow(res), title(<span class="string">'result'</span>)</pre><img src="gabor_demo_02.png"><img src="gabor_demo_03.png"><div class="footer">
            <p><a href="https://www.mathworks.com/products/matlab.html">Published with MATLAB&reg; R2017a</a></p>
         </div>
      </div>
      <!--
##### SOURCE BEGIN #####
%% Gabor filtering
%
% This sample demonstrates the use of multiple Gabor filter convolutions to
% get <http://www.redfieldplugins.com/filterFractalius.htm Fractalius-like>
% image effect.
%
% Sources:
%
% * <https://github.com/opencv/opencv/blob/3.2.0/samples/python/gabor_threads.py>
%

%%
% load image
img = imread(fullfile(mexopencv.root(),'test','img001.jpg'));

%%
% build an array of Gabor filters with different orientations
ksize = 31;
thetas = 0:pi/16:pi-pi/16;
filters = cell(size(thetas));
for i=1:numel(thetas)
    kern = cv.getGaborKernel('KSize',[ksize ksize], 'Theta',thetas(i), ...
        'Sigma',4, 'Lambda',10, 'Gamma',0.5, 'Psi',0, 'KType','single');
    kern = kern / (1.5 * sum(kern(:)));
    filters{i} = kern;
end

%%
% visualize Gabor filters
if mexopencv.require('images')
    montage(cat(4,filters{:}), 'DisplayRange',[])
end

%%
% process images using Gabor filters and accumulate results
% (Note: you can use PARFOR instead of FOR to run this in parallel)
tic
res = zeros(size(img), class(img));
for i=1:numel(filters)
    fimg = cv.filter2D(img, filters{i});
    res = max(res, fimg);
end
toc

%%
% show result
figure, imshow(img), title('image')
figure, imshow(res), title('result')

##### SOURCE END #####
-->
   </body>
</html>