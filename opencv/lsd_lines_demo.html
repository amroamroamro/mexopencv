<!DOCTYPE html>
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
      <!--This HTML was auto-generated from published MATLAB code.-->
      <title>Line Segment Detector demo</title>
      <meta name="generator" content="MATLAB 9.2">
      <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/">
      <meta name="DC.date" content="2017-11-27">
      <meta name="DC.source" content="lsd_lines_demo.m">
      <link rel="stylesheet" type="text/css" href="publish_custom.css">
   </head>
   <body>
      <div class="content">
         <h1 id="1">Line Segment Detector demo</h1>
         <!--introduction-->
         <p>An example using the <tt>cv.LineSegmentDetector</tt> class.
         </p>
         <p>Sources:</p>
         <div>
            <ul>
               <li><a href="https://github.com/opencv/opencv/blob/3.3.1/samples/cpp/lsd_lines.cpp">https://github.com/opencv/opencv/blob/3.3.1/samples/cpp/lsd_lines.cpp</a></li>
            </ul>
         </div>
         <!--/introduction-->
         <h2 id="toc">Contents</h2>
         <div>
            <ul>
               <li><a href="#2">Input image</a></li>
               <li><a href="#3">Preprocess</a></li>
               <li><a href="#4">LSD detectors</a></li>
               <li><a href="#6">Result 1</a></li>
               <li><a href="#7">Result 2</a></li>
               <li><a href="#8">Compare</a></li>
            </ul>
         </div>
         <h2 id="2">Input image</h2><pre class="codeinput">img = cv.imread(fullfile(mexopencv.root(),<span class="string">'test'</span>,<span class="string">'building.jpg'</span>), <span class="string">'Grayscale'</span>,true);</pre><h2 id="3">Preprocess</h2>
         <p>Apply canny edge detector</p><pre class="codeinput"><span class="keyword">if</span> false
    img = cv.Canny(img, [50 200], <span class="string">'ApertureSize'</span>,5);
<span class="keyword">end</span></pre><h2 id="4">LSD detectors</h2>
         <p>Create two LSD detectors with standard and no refinement.</p><pre class="codeinput">lsd1 = cv.LineSegmentDetector(<span class="string">'Refine'</span>,<span class="string">'Standard'</span>);
lsd2 = cv.LineSegmentDetector(<span class="string">'Refine'</span>,<span class="string">'None'</span>);</pre><p>Detect the lines both ways</p><pre class="codeinput">tic, lines1 = lsd1.detect(img); toc
tic, lines2 = lsd2.detect(img); toc</pre><pre class="codeoutput">Elapsed time is 0.102855 seconds.
Elapsed time is 0.037938 seconds.
</pre><h2 id="6">Result 1</h2>
         <p>Show found lines with standard refinement</p><pre class="codeinput">drawnLines1 = lsd1.drawSegments(img, lines1);
imshow(drawnLines1), title(<span class="string">'Standard refinement'</span>)</pre><img src="lsd_lines_demo_01.png"><h2 id="7">Result 2</h2>
         <p>Show found lines with no refinement</p><pre class="codeinput">drawnLines2 = lsd2.drawSegments(img, lines2);
imshow(drawnLines2), title(<span class="string">'No refinement'</span>)</pre><img src="lsd_lines_demo_02.png"><h2 id="8">Compare</h2><pre class="codeinput">[h,w,~] = size(img);
[comparison,mis_count] = lsd1.compareSegments([w,h], lines1, lines2);
imshow(comparison), title(sprintf(<span class="string">'Mismatch = %d'</span>, mis_count))</pre><img src="lsd_lines_demo_03.png"><div class="footer">
            <p><a href="https://www.mathworks.com/products/matlab.html">Published with MATLAB&reg; R2017a</a></p>
         </div>
      </div>
      <!--
##### SOURCE BEGIN #####
%% Line Segment Detector demo
% An example using the |cv.LineSegmentDetector| class.
%
% Sources:
%
% * <https://github.com/opencv/opencv/blob/3.3.1/samples/cpp/lsd_lines.cpp>
%

%% Input image
img = cv.imread(fullfile(mexopencv.root(),'test','building.jpg'), 'Grayscale',true);

%% Preprocess
% Apply canny edge detector
if false
    img = cv.Canny(img, [50 200], 'ApertureSize',5);
end

%% LSD detectors
% Create two LSD detectors with standard and no refinement.
lsd1 = cv.LineSegmentDetector('Refine','Standard');
lsd2 = cv.LineSegmentDetector('Refine','None');

%%
% Detect the lines both ways
tic, lines1 = lsd1.detect(img); toc
tic, lines2 = lsd2.detect(img); toc

%% Result 1
% Show found lines with standard refinement
drawnLines1 = lsd1.drawSegments(img, lines1);
imshow(drawnLines1), title('Standard refinement')

%% Result 2
% Show found lines with no refinement
drawnLines2 = lsd2.drawSegments(img, lines2);
imshow(drawnLines2), title('No refinement')

%% Compare
[h,w,~] = size(img);
[comparison,mis_count] = lsd1.compareSegments([w,h], lines1, lines2);
imshow(comparison), title(sprintf('Mismatch = %d', mis_count))

##### SOURCE END #####
-->
   </body>
</html>