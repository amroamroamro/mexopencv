<!DOCTYPE html>
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   
      <!--This HTML was auto-generated from published MATLAB code.-->
      <title>Polar Transforms demo</title>
      <meta name="generator" content="MATLAB 9.2">
      <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/">
      <meta name="DC.date" content="2017-11-27">
      <meta name="DC.source" content="polar_transforms_demo.m">
      <link rel="stylesheet" type="text/css" href="publish_custom.css">
   </head>
   <body>
      <div class="content">
         <h1 id="1">Polar Transforms demo</h1>
         <!--introduction-->
         <p>An example using the <tt>cv.linearPolar</tt> and <tt>cv.logPolar</tt> operations.
         </p>
         <p>This program illustrates Linear-Polar and Log-Polar image transforms.</p>
         <p>Sources:</p>
         <div>
            <ul>
               <li><a href="https://github.com/opencv/opencv/blob/3.2.0/samples/cpp/polar_transforms.cpp">https://github.com/opencv/opencv/blob/3.2.0/samples/cpp/polar_transforms.cpp</a></li>
               <li><a href="https://github.com/opencv/opencv/blob/3.2.0/samples/python/logpolar.py">https://github.com/opencv/opencv/blob/3.2.0/samples/python/logpolar.py</a></li>
            </ul>
         </div>
         <!--/introduction-->
         <p>Set up camera</p><pre class="codeinput">camera = createVideoCapture([], <span class="string">'chess'</span>);
pause(1); <span class="comment">% Necessary in some environment. See help cv.VideoCapture</span>
assert(camera.isOpened(), <span class="string">'Camera failed to initialize'</span>);

im = camera.read();
assert(~isempty(im), <span class="string">'Failed to capture frames'</span>);
[r,c,~] = size(im);

disp(<span class="string">'Polar transforms demo. Press any key when done.'</span>);</pre><pre class="codeoutput">Polar transforms demo. Press any key when done.
</pre><p>Set up display window, and start the main loop</p><pre class="codeinput">window = figure(<span class="string">'KeyPressFcn'</span>,@(obj,evt) setappdata(obj, <span class="string">'flag'</span>,true));
setappdata(window, <span class="string">'flag'</span>,false);

subplot(224), hImg(4) = imshow(im); title(<span class="string">'Recovered Linear-Polar'</span>)
subplot(223), hImg(3) = imshow(im); title(<span class="string">'Recovered Log-Polar'</span>)
subplot(222), hImg(2) = imshow(im); title(<span class="string">'Linear-Polar'</span>)
subplot(221), hImg(1) = imshow(im); title(<span class="string">'Log-Polar'</span>)

<span class="comment">% Start main loop</span>
<span class="keyword">while</span> ishghandle(window)
    <span class="comment">% Grab an image</span>
    im = camera.read();
    <span class="keyword">if</span> isempty(im), <span class="keyword">break</span>; <span class="keyword">end</span>

    center = [c r] / 2;
    <span class="keyword">if</span> true
        radius = min(c,r) / 2;
        M = c / log(radius);
    <span class="keyword">else</span>
        M = 70;
        radius = M;
    <span class="keyword">end</span>

    <span class="comment">% transform</span>
    log_polar_img = cv.logPolar(im, center, M, <span class="keyword">...</span>
        <span class="string">'Interpolation'</span>,<span class="string">'Linear'</span>, <span class="string">'FillOutliers'</span>,true);
    lin_polar_img = cv.linearPolar(im, center, radius, <span class="keyword">...</span>
        <span class="string">'Interpolation'</span>,<span class="string">'Linear'</span>, <span class="string">'FillOutliers'</span>,true);

    <span class="comment">% recover</span>
    recovered_log_img = cv.logPolar(log_polar_img, center, M, <span class="keyword">...</span>
        <span class="string">'Interpolation'</span>,<span class="string">'Linear'</span>, <span class="string">'FillOutliers'</span>,false, <span class="string">'InverseMap'</span>,true);
    recovered_lin_img = cv.linearPolar(lin_polar_img, center, radius, <span class="keyword">...</span>
        <span class="string">'Interpolation'</span>,<span class="string">'Linear'</span>, <span class="string">'FillOutliers'</span>,true, <span class="string">'InverseMap'</span>,true);

    <span class="comment">% show results</span>
    set(hImg(1), <span class="string">'CData'</span>,log_polar_img);
    set(hImg(2), <span class="string">'CData'</span>,lin_polar_img);
    set(hImg(3), <span class="string">'CData'</span>,recovered_log_img);
    set(hImg(4), <span class="string">'CData'</span>,recovered_lin_img);

    <span class="comment">% Terminate if any user input</span>
    flag = getappdata(window, <span class="string">'flag'</span>);
    <span class="keyword">if</span> isempty(flag) || flag, <span class="keyword">break</span>; <span class="keyword">end</span>
    pause(0.1);
<span class="keyword">end</span>

<span class="comment">% Close</span>
camera.release();</pre><img src="polar_transforms_demo_01.png"><div class="footer">
            <p><a href="https://www.mathworks.com/products/matlab.html">Published with MATLAB&reg; R2017a</a></p>
         </div>
      </div>
      <!--
##### SOURCE BEGIN #####
%% Polar Transforms demo
% An example using the |cv.linearPolar| and |cv.logPolar| operations.
%
% This program illustrates Linear-Polar and Log-Polar image transforms.
%
% Sources:
%
% * <https://github.com/opencv/opencv/blob/3.2.0/samples/cpp/polar_transforms.cpp>
% * <https://github.com/opencv/opencv/blob/3.2.0/samples/python/logpolar.py>
%

%%
% Set up camera
camera = createVideoCapture([], 'chess');
pause(1); % Necessary in some environment. See help cv.VideoCapture
assert(camera.isOpened(), 'Camera failed to initialize');

im = camera.read();
assert(~isempty(im), 'Failed to capture frames');
[r,c,~] = size(im);

disp('Polar transforms demo. Press any key when done.');

%%
% Set up display window, and start the main loop

window = figure('KeyPressFcn',@(obj,evt) setappdata(obj, 'flag',true));
setappdata(window, 'flag',false);

subplot(224), hImg(4) = imshow(im); title('Recovered Linear-Polar')
subplot(223), hImg(3) = imshow(im); title('Recovered Log-Polar')
subplot(222), hImg(2) = imshow(im); title('Linear-Polar')
subplot(221), hImg(1) = imshow(im); title('Log-Polar')

% Start main loop
while ishghandle(window)
    % Grab an image
    im = camera.read();
    if isempty(im), break; end

    center = [c r] / 2;
    if true
        radius = min(c,r) / 2;
        M = c / log(radius);
    else
        M = 70;
        radius = M;
    end

    % transform
    log_polar_img = cv.logPolar(im, center, M, ...
        'Interpolation','Linear', 'FillOutliers',true);
    lin_polar_img = cv.linearPolar(im, center, radius, ...
        'Interpolation','Linear', 'FillOutliers',true);

    % recover
    recovered_log_img = cv.logPolar(log_polar_img, center, M, ...
        'Interpolation','Linear', 'FillOutliers',false, 'InverseMap',true);
    recovered_lin_img = cv.linearPolar(lin_polar_img, center, radius, ...
        'Interpolation','Linear', 'FillOutliers',true, 'InverseMap',true);

    % show results
    set(hImg(1), 'CData',log_polar_img);
    set(hImg(2), 'CData',lin_polar_img);
    set(hImg(3), 'CData',recovered_log_img);
    set(hImg(4), 'CData',recovered_lin_img);

    % Terminate if any user input
    flag = getappdata(window, 'flag');
    if isempty(flag) || flag, break; end
    pause(0.1);
end

% Close
camera.release();

##### SOURCE END #####
-->
   </body>
</html>